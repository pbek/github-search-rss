{
    "version": "https://jsonfeed.org/version/1",
    "title": "NixOS Package PRs for attic",
    "home_page_url": "https://pbek.github.io/github-search-rss/nixos-attic.json",
    "feed_url": "https://pbek.github.io/github-search-rss/nixos-attic.json",
    "description": "NixOS Package PRs for attic on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/3154475?u=2361ab7ee3f009aa65aa78e8041a2f9d93daa070&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h6 dir=\"auto\">Motivation for this change</h6>\n<p dir=\"auto\">Idea is to generate a list of constraints from the package set we have at branch-off (in this case quite some time after, which increased the pain associated with it). As a result regenerating <code class=\"notranslate\">hackage-packages.nix</code> will only touch the underscore attributes and the cabal file revisions, but not the package versions.</p>\n<p dir=\"auto\">Backporting would then be as easy as:</p>\n<ol dir=\"auto\">\n<li><code class=\"notranslate\">./maintainers/scripts/haskell/update-hackage.sh --do-commit</code></li>\n<li><code class=\"notranslate\">./maintainers/scripts/haskell/regenerate-hackage-packages.sh</code></li>\n<li>Fixing any new eval errors</li>\n<li><code class=\"notranslate\">./maintainers/scripts/haskell/freeze-packages.sh</code> to freeze all newly added packages</li>\n<li>Edit the version constraint in <code class=\"notranslate\">pkgs/development/haskell-modules/configuration-hackage2nix/frozen-packages.yaml</code></li>\n<li><code class=\"notranslate\">./maintainers/scripts/haskell/regenerate-hackage-packages.sh</code></li>\n</ol>\n<p dir=\"auto\">This is not as polished as it could be possibly, but a lot better than the status quo. I would like to gain some experience with this, so we can start out with such a system for 21.11. I'd prioritize this over pondering if there is a better technical solution for parts of this (maybe dumping the used constraints from <code class=\"notranslate\">hackage2nix</code>?).</p>\n<p dir=\"auto\">Documentation will be added to <code class=\"notranslate\">HACKING.md</code> on <code class=\"notranslate\">master</code> in a separate PR, since <code class=\"notranslate\">release-21.05</code> doesn't have this file and backporting it would be an unnecessary painful experience.</p>\n<h6 dir=\"auto\">Things done</h6>\n\n<ul class=\"contains-task-list\">\n<li>Built on platform(s)\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> x86_64-linux</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> aarch64-linux</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> x86_64-darwin</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> aarch64-darwin</li>\n</ul>\n</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> For non-Linux: Is <code class=\"notranslate\">sandbox = true</code> set in <code class=\"notranslate\">nix.conf</code>? (See <a href=\"https://nixos.org/manual/nix/stable/#sec-conf-file\" rel=\"nofollow\">Nix manual</a>)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tested via one or more NixOS test(s) if existing and applicable for the change (look inside <a href=\"https://github.com/NixOS/nixpkgs/blob/master/nixos/tests\">nixos/tests</a>)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tested compilation of all packages that depend on this change using <code class=\"notranslate\">nix-shell -p nixpkgs-review --run \"nixpkgs-review wip\"</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tested execution of all binary files (usually in <code class=\"notranslate\">./result/bin/</code>)</li>\n<li><a href=\"https://github.com/NixOS/nixpkgs/blob/master/CONTRIBUTING.md#generating-2111-release-notes\">21.11 Release Notes (or backporting 21.05 Release notes)</a>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> (Package updates) Added a release notes entry if the change is major or breaking</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> (Module updates) Added a release notes entry if the change is significant</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> (Module addition) Added a release notes entry if adding a new NixOS module</li>\n</ul>\n</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Fits <a href=\"https://github.com/NixOS/nixpkgs/blob/master/CONTRIBUTING.md\">CONTRIBUTING.md</a>.</li>\n</ul>",
            "url": "https://github.com/NixOS/nixpkgs/pull/138407",
            "title": "Frozen haskellPackages set for 21.05 to ease backporting bug fix releases",
            "date_modified": "2023-03-16T09:00:02.000Z",
            "date_published": "2021-09-18T11:08:36.000Z",
            "author": {
                "name": "sternenseemann",
                "url": "https://github.com/sternenseemann"
            }
        }
    ]
}